<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.57.0 with theme Tranquilpeak 0.4.7-BETA">
<meta name="author" content="YaTo">
<meta name="keywords" content="数据库使用, C&#43;&#43;, 日常, 数据结构, 算法">
<meta name="description" content="　　好久没有更新了，因为忙于校招同时也是因为自己的懒惰，废话不多说，这边文章如题目所言就是把自己从重新下载安装MySQL数据库到跟着视频学习的记录，有点笔记风格，但也全是自己手打整理。">


<meta property="og:description" content="　　好久没有更新了，因为忙于校招同时也是因为自己的懒惰，废话不多说，这边文章如题目所言就是把自己从重新下载安装MySQL数据库到跟着视频学习的记录，有点笔记风格，但也全是自己手打整理。">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL初体验">
<meta name="twitter:title" content="MySQL初体验">
<meta property="og:url" content="https://yato534.github.io/2019/10/mysql%E5%88%9D%E4%BD%93%E9%AA%8C/">
<meta property="twitter:url" content="https://yato534.github.io/2019/10/mysql%E5%88%9D%E4%BD%93%E9%AA%8C/">
<meta property="og:site_name" content="逛街晚餐 薄雾客栈">
<meta property="og:description" content="　　好久没有更新了，因为忙于校招同时也是因为自己的懒惰，废话不多说，这边文章如题目所言就是把自己从重新下载安装MySQL数据库到跟着视频学习的记录，有点笔记风格，但也全是自己手打整理。">
<meta name="twitter:description" content="　　好久没有更新了，因为忙于校招同时也是因为自己的懒惰，废话不多说，这边文章如题目所言就是把自己从重新下载安装MySQL数据库到跟着视频学习的记录，有点笔记风格，但也全是自己手打整理。">
<meta property="og:locale" content="zh-cn">

  
    <meta property="article:published_time" content="2019-10-11T22:09:32">
  
  
    <meta property="article:modified_time" content="2019-10-11T22:09:32">
  
  
  
    
      <meta property="article:section" content="技术小白">
    
      <meta property="article:section" content="数据库">
    
  
  
    
      <meta property="article:tag" content="mysql">
    
  


<meta name="twitter:card" content="summary">







  <meta property="og:image" content="https://yato534.github.io/images/mysql.jpg">
  <meta property="twitter:image" content="https://yato534.github.io/images/mysql.jpg">


  <meta property="og:image" content="https://yato534.github.io/images/huoshan.jpg">
  <meta property="twitter:image" content="https://yato534.github.io/images/huoshan.jpg">




  <meta property="og:image" content="https://yato534.github.io/images/yato.jpg">
  <meta property="twitter:image" content="https://yato534.github.io/images/yato.jpg">


    <title>MySQL初体验</title>

    <link rel="icon" href="https://yato534.github.io/favicon.png">
    

    

    <link rel="canonical" href="https://yato534.github.io/2019/10/mysql%E5%88%9D%E4%BD%93%E9%AA%8C/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://yato534.github.io/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://yato534.github.io/">逛街晚餐 薄雾客栈</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://yato534.github.io/#about">
    
    
    
      
        <img class="header-picture" src="https://yato534.github.io/images/yato.jpg" alt="作者的图片" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://yato534.github.io/#about">
          <img class="sidebar-profile-picture" src="https://yato534.github.io/images/yato.jpg" alt="作者的图片" />
        </a>
        <h4 class="sidebar-profile-name">YaTo</h4>
        
          <h5 class="sidebar-profile-bio">Is life always this hard? Or is it just when you&rsquo;re a kid?</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yato534.github.io/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">首页</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yato534.github.io/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">类别</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yato534.github.io/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">标签</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yato534.github.io/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">归档</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yato534.github.io/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">关于</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/yato534" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://yato534.github.io/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-center
              post-header-cover--full"
       style="background-image:url('/images/huoshan.jpg')"
       data-behavior="5">
    
      <div class="post-header main-content-wrap text-center">
  
    <h1 class="post-title" itemprop="headline">
      MySQL初体验
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2019-10-11T22:09:32&#43;08:00">
        
  十月 11, 2019

      </time>
    
    
  
  
    <span>发布在</span>
    
      <a class="category-link" href="https://yato534.github.io/categories/%e6%8a%80%e6%9c%af%e5%b0%8f%e7%99%bd">技术小白</a>, 
    
      <a class="category-link" href="https://yato534.github.io/categories/%e6%95%b0%e6%8d%ae%e5%ba%93">数据库</a>
    
  

  </div>

</div>
    
  </div>


      <div id="main" data-behavior="5"
        class="hasCover
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>　　好久没有更新了，因为忙于校招同时也是因为自己的懒惰，废话不多说，这边文章如题目所言就是把自己从重新下载安装MySQL数据库到跟着视频学习的记录，有点笔记风格，但也全是自己手打整理。</p>

<h1 id="table-of-contents">目录</h1><nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#数据库下载安装">数据库下载安装</a></li>
<li><a href="#环境配置">环境配置</a></li>
<li><a href="#使用终端操作数据库">使用终端操作数据库</a>
<ul>
<li><a href="#非空约束">非空约束</a></li>
<li><a href="#默认约束">默认约束</a></li>
<li><a href="#外键约束">外键约束</a></li>
</ul></li>
<li><a href="#数据库的三大设计范式">数据库的三大设计范式</a>
<ul>
<li><a href="#1-第一范式">1、第一范式</a></li>
<li><a href="#2-第二范式">2、第二范式</a></li>
<li><a href="#3-第三范式">3、第三范式</a></li>
</ul></li>
<li><a href="#mysql查询练习">mysql查询练习</a>
<ul>
<li><a href="#往数据表中添加数据">往数据表中添加数据</a></li>
<li><a href="#查询练习">查询练习</a>
<ul>
<li><a href="#1-查询练习-student表的所有记录">1、查询练习-Student表的所有记录</a></li>
<li><a href="#2-查询练习-student表中所有记录的s-name-s-gender-s-class列">2、查询练习-Student表中所有记录的s_name,s_gender,s_class列</a></li>
<li><a href="#3-查询练习-教师所有的单位即不重复的depart列">3、查询练习-教师所有的单位即不重复的depart列</a></li>
<li><a href="#4-查询练习-score表中成绩在60-80之间的所有记录">4、查询练习-Score表中成绩在60-80之间的所有记录</a></li>
<li><a href="#5-查询练习-score表中成绩为85或86或88的记录">5、查询练习-Score表中成绩为85或86或88的记录</a></li>
<li><a href="#6-查询练习-student表中-b1602-班或性别为-女-的同学记录">6、查询练习-Student表中“B1602”班或性别为“女”的同学记录</a></li>
<li><a href="#7-查询练习-以class降序查询student表所有记录">7、查询练习-以class降序查询Student表所有记录</a></li>
<li><a href="#8-查询练习-以c-no升序-degree降序查询score表的所有记录">8、查询练习-以c_no升序、degree降序查询score表的所有记录</a></li>
<li><a href="#9-查询练习-查询-b1602-班的学生人数">9、查询练习-查询&rdquo;B1602&rdquo;班的学生人数</a></li>
<li><a href="#10-查询练习-score表中的最高分的学生学号课程号-子查询或者排序">10、查询练习-Score表中的最高分的学生学号课程号（子查询或者排序）</a></li>
<li><a href="#11-查询练习-分组计算平均成绩">11、查询练习-分组计算平均成绩</a></li>
<li><a href="#12-查询练习-分组条件与模糊查询">12、查询练习-分组条件与模糊查询</a></li>
<li><a href="#13-查询练习-范围查询的两种方式">13、查询练习-范围查询的两种方式</a></li>
<li><a href="#17-查询练习-子查询加分组求平均分">17、查询练习-子查询加分组求平均分</a></li>
<li><a href="#19-查询练习-子查询">19、查询练习-子查询</a></li>
<li><a href="#20-查询练习-year函数与带in关键字的子查询">20、查询练习-year函数与带in关键字的子查询</a></li>
<li><a href="#21-查询练习-多层嵌套子查询">21、查询练习-多层嵌套子查询</a></li>
<li><a href="#22-查询练习-多表查询">22、查询练习-多表查询</a></li>
<li><a href="#23-查询练习-in表示或者关系">23、查询练习-in表示或者关系</a></li>
<li><a href="#24-查询练习-where条件查询">24、查询练习-where条件查询</a></li>
<li><a href="#25-查询练习-子查询">25、查询练习-子查询</a></li>
<li><a href="#26-查询练习-union和not-in-的使用">26、查询练习-union和not in 的使用</a></li>
<li><a href="#27-查询练习-any表示至少">27、查询练习-any表示至少</a></li>
<li><a href="#28-查询练习-all表示所有">28、查询练习-all表示所有</a></li>
<li><a href="#29-查询练习-as取别名-union求并集">29、查询练习-as取别名,union求并集</a></li>
<li><a href="#30-查询练习-union求并集">30、查询练习-union求并集</a></li>
<li><a href="#31-查询练习-复制表数据做条件查询">31、查询练习-复制表数据做条件查询</a></li>
<li><a href="#32-查询练习-子查询">32、查询练习-子查询</a></li>
<li><a href="#33-查询练习-条件加分组删选">33、查询练习-条件加分组删选</a></li>
<li><a href="#34-查询练习-not-like模糊查询取反">34、查询练习-not like模糊查询取反</a></li>
<li><a href="#35-查询练习-year函数和now函数">35、查询练习-year函数和now函数</a></li>
<li><a href="#36-查询练习-max和min函数">36、查询练习-max和min函数</a></li>
<li><a href="#37-查询练习-多字段排序">37、查询练习-多字段排序</a></li>
<li><a href="#38-查询练习-子查询">38、查询练习-子查询</a></li>
<li><a href="#39-查询练习-max函数与子查询">39、查询练习-max函数与子查询</a></li>
<li><a href="#40-查询练习-子查询">40、查询练习-子查询</a></li>
<li><a href="#41-查询练习-子查询">41、查询练习-子查询</a></li>
<li><a href="#42-查询练习-子查询">42、查询练习-子查询</a></li>
<li><a href="#43-查询练习-按等级查询">43、查询练习-按等级查询</a></li>
</ul></li>
</ul></li>
<li><a href="#mysql连接查询">mysql连接查询</a>
<ul>
<li><a href="#1-inner-join查询-内连接">1、inner join查询（内连接）</a></li>
<li><a href="#2-left-join查询-左外连接">2、left join查询（左外连接）</a></li>
<li><a href="#3-right-join查询-右外连接">3、right join查询(右外连接)</a></li>
<li><a href="#4-full-join查询-全外连接">4、full join查询（全外连接）</a></li>
</ul></li>
<li><a href="#mysql事务">mysql事务</a>
<ul>
<li><a href="#1-mysql默认是开启事务的-自动提交">1、mysql默认是开启事务的(自动提交)</a></li>
<li><a href="#2-设置mysql自动提交为false">2、设置mysql自动提交为false</a></li>
<li><a href="#3-其他方法事务回滚">3、其他方法事务回滚</a></li>
<li><a href="#4-事务的四大特性">4、事务的四大特性</a></li>
</ul></li>
</ul></li>
</ul>
</nav>

<h2 id="数据库下载安装">数据库下载安装</h2>

<p>　　既然要学习MySQL，那么不可避免的我们需要先下载安装，我自己是win10的系统，首先我们直接百度MySQL,页面第一个就是官网，进去之后点击DOWNLOADS,页面拉到最下面，点击MySQL Community Server,
<img src="https://yato534.github.io/images/mysql/xiazai.jpg" alt="hugo" />
进去之后选择自己的系统下载即可。
<img src="https://yato534.github.io/images/mysql/xiazai2.jpg" alt="hugo" />
　　下载好之后我们就可以进行安装了，双击我们之前下载好的msi程序，选择Custom自定义安装，
<img src="https://yato534.github.io/images/mysql/mysql1.jpg" alt="hugo" />
然后如图所示选择好MySQL Server之后点击绿色箭头，把它设置为本地安装，
<img src="https://yato534.github.io/images/mysql/mysql2.jpg" alt="hugo" />
因为我是作为自己学习使用，所以选择第一个，
<img src="https://yato534.github.io/images/mysql/mysql3.jpg" alt="hugo" />
期间其他的一路next,最后我们设置自己的MySQL密码，就成功的安装了MySQL。
<img src="https://yato534.github.io/images/mysql/mysql4.jpg" alt="hugo" /></p>

<h2 id="环境配置">环境配置</h2>

<p>　　安装好MySQL之后我们还需要配置环境变量，在我的电脑右键属性然后高级系统设置，然后点击环境变量，然后把MySQL的bin目录添加到path中，我是默认安装的，一般在C:\Program Files\MySQL\MySQL Server8.0\bin，
<img src="https://yato534.github.io/images/mysql/mysql5.jpg" alt="hugo" />
成功配置好环境变量后，我们可以检验一下自己有没有配置成功，打开cmd终端窗口，输入命令mysql -u root -p,然后输入自己设置的密码，出现如图所示，那么就表示我们成功的安装好MySQL了！
<img src="https://yato534.github.io/images/mysql/mysql6.jpg" alt="hugo" /></p>

<h2 id="使用终端操作数据库">使用终端操作数据库</h2>

<p>　　接下来的学习都是在终端上进行的一系列数据库操作。</p>

<h3 id="非空约束">非空约束</h3>

<p>　　修饰的字段不能为空NULL</p>

<pre><code>create table user9(
　　id int,
　　name varchar(20) NOT NULL
);
</code></pre>

<pre><code>insert into user9(id) values(1);
//ERROR name为空
insert into user9 values(1, '夜斗');
//true
insert into user9 (name) values('夜斗');
//true
</code></pre>

<h3 id="默认约束">默认约束</h3>

<p>　　就是当我们插入字段值的时候，如果没有传值，就会使用默认值。</p>

<pre><code>create table user10(
    id int,
    name varchar(20),
    age int default 10
);
</code></pre>

<pre><code>insert into user10(id, name) values(1, '夜斗');
//age默认为10
insert into user10 values(1,'夜斗'，19);
//age传值后就不会使用默认值
</code></pre>

<h3 id="外键约束">外键约束</h3>

<p>　　设计到两个表：父表，子表，或者说主表，副表。</p>

<pre><code>//班级
create  table classes(
    id int primary key,
    name varchar(20)
);
//学生表
create table students(
    id int primary key,
     name varchar(20),
    class_id int,
    foreign key(class_id) references classes(id)
);
</code></pre>

<pre><code>insert into students values(1001, '夜斗', 1);
insert into students values(1002, '夜斗', 2);
insert into students values(1003, '夜斗', 3);
insert into students values(1004, '夜斗', 4);

insert into students values(1005, '夜斗', 5);//ERROR 

insert into classes values(1, '一班');
insert into classes values(2, '二班');
insert into classes values(3, '三班');
insert into classes values(4, '四班');
//1、主表 classes中没有的数据值，在副表中，是不可以使用的。
//2、主表中的记录被副标引用，是不可以被删除的。
delete from classes where id = '4';//ERROR
</code></pre>

<h2 id="数据库的三大设计范式">数据库的三大设计范式</h2>

<h3 id="1-第一范式">1、第一范式</h3>

<p>　　数据库表中的所有字段都是不可分割的原子值。</p>

<pre><code>create table students2(
    id int primary key,
    name varchar(20),
    address varchar(30)
);
</code></pre>

<pre><code>insert into students values(1, '夜斗1', '江苏南京');
insert into students values(2, '夜斗2', '江苏无锡');
insert into students values(3, '夜斗3', '安徽六安');
//字段值还可以继续拆分的，就不满足第一范式
</code></pre>

<pre><code>create table students3(
    id int primary key,
    name varchar(20),
    privence varchar(30),
    city varchar(30)
);
</code></pre>

<pre><code>insert into students values(1, '夜斗1', '江苏', '南京');
insert into students values(2, '夜斗2', '江苏', '无锡');
insert into students values(3, '夜斗3', '安徽', '六安');
//范式设计的越详细，对于某些实际操作可能更好，但是不一定都是好处，需根据实际开发设计
</code></pre>

<h3 id="2-第二范式">2、第二范式</h3>

<p>　　必须是满足第一范式的前提下，第二范式要求，除主键外的每一列都必须完全依赖与主键；如果出现不完全依赖，只可能发生在联合主键的情况下。</p>

<pre><code>//订单表
create table myorder(
    produce_id int,
    customer_id int,
    product_name varchar(20),
    customer_name varchar(20),
    primary key(product_id, customer_id);
);
//问题？除主键以外的其他列，只依赖与主键的部分字段，不满足第二范式。
</code></pre>

<pre><code>//解决上述问题的方法就是拆表
create table myorder(
    order_id int primary key,
    produce_id int,
    customer_id int,
);

create table product(
    id int primary key,
    name varchar(20),
);

create table customer(
    id int primary key,
    name varchar(20),
//拆成三个表之后，满足第二范式。    
</code></pre>

<h3 id="3-第三范式">3、第三范式</h3>

<p>　　必须先满足第二范式，除开主键列的其他列不能有传递依赖关系。</p>

<pre><code>create table myorder(
    order_id int primary key,
    produce_id int,
    customer_id int,
    cestomer_phone varchar(20)//不满足第三范式
);
</code></pre>

<pre><code>create table myorder(
    order_id int primary key,
    produce_id int,
    customer_id int,
);
create table customer(
    id int primary key,
    name varchar(20),
    phone varchar(20)
);
//满足第三范式
</code></pre>

<h2 id="mysql查询练习">mysql查询练习</h2>

<pre><code>学生表
Student
学号
姓名
性别
出生年月日
所在班级
create table Student(
    s_no varchar(20) primary key,
    s_name varchar(20) not null,
    s_gender varchar(10) not null,
    s_birthday datetime,
    s_class varchar(20)
);

教师表
Teacher
教师编号
教师姓名
教师性别
出生年月日
职称
所在部门
create table Teacher(
    t_no varchar(20) primary key,
    t_name varchar(20) not null,
    t_gender varchar(10) not null,
    t_birthday datetime,
    t_prof varchar(20) not null,
    t_depart varchar(20) not null
);

课程表
Course
课程号
课程名称
教师编号
create table Course(
    c_no varchar(20) primary key,
    c_name varchar(20) not null,
    t_no varchar(20) not null,
    foreign key(t_no) references teacher(t_no)
);

成绩表
Score
学号
课程号
成绩
create table Score(
    s_no varchar(20) not null,
    c_no varchar(20) not null,
    s_degree decimal,
    foreign key(s_no) references Student(s_no),
    foreign key(c_no) references Course(c_no),
    primary key(s_no, c_no)
);
</code></pre>

<h3 id="往数据表中添加数据">往数据表中添加数据</h3>

<pre><code>//添加学生信息
insert into Student values('1810', '张一', '男', '1990-09-01', 'B1604');
insert into Student values('1811', '李二', '男', '1991-10-02', 'B1605');
insert into Student values('1812', '孙钱', '男', '1992-11-03', 'B1604');
insert into Student values('1813', '赵雯', '女', '1994-12-05', 'B1603');
insert into Student values('1814', '王立', '男', '1996-02-11', 'B1602');
insert into Student values('1815', '欧锦', '女', '1997-06-23', 'B1602');
insert into Student values('1816', '王尼玛', '女', '1994-12-05', 'B1603');
insert into Student values('1817', '张全蛋', '男', '1996-02-11', 'B1602');
insert into Student values('1818', '赵铁柱', '女', '1997-06-23', 'B1602');

//添加教师信息
insert into Teacher values('803', '李承', '男', '1968-09-03', '副教授', '计算机系');
insert into Teacher values('805', '张旭', '男', '1969-01-03', '讲师', '电子工程系');
insert into Teacher values('808', '王萍', '女', '1977-05-05', '助教', '计算机系');
insert into Teacher values('810', '刘冰', '女', '1972-08-14', '助教', '电子工程系');

//添加课程信息
insert into Course values('3-105', '计算机导论', '803');
insert into Course values('3-245', '操作系统', '808');
insert into Course values('6-166', '数字电路', '805');
insert into Course values('9-888', '高等数学', '810');

//添加成绩信息
insert into Score values('1810', '3-105', '56');
insert into Score values('1810', '9-888', '97');
insert into Score values('1811', '3-105', '75');
insert into Score values('1812', '3-245', '84');
insert into Score values('1812', '6-166', '74');
insert into Score values('1813', '6-166', '75');
insert into Score values('1814', '3-245', '93');
insert into Score values('1815', '3-245', '85');
insert into Score values('1816', '9-888', '72');
insert into Score values('1817', '9-888', '89');
insert into Score values('1818', '3-105', '85');
insert into Score values('1818', '6-166', '79');
</code></pre>

<h3 id="查询练习">查询练习</h3>

<h4 id="1-查询练习-student表的所有记录">1、查询练习-Student表的所有记录</h4>

<pre><code>mysql&gt; select * from Student;
+------+--------+----------+---------------------+---------+
| s_no | s_name | s_gender | s_birthday          | s_class |
+------+--------+----------+---------------------+---------+
| 1810 | 张一   | 男       | 1990-09-01 00:00:00 | B1604   |
| 1811 | 李二   | 男       | 1991-10-02 00:00:00 | B1605   |
| 1812 | 孙钱   | 男       | 1992-11-03 00:00:00 | B1604   |
| 1813 | 赵雯   | 女       | 1994-12-05 00:00:00 | B1603   |
| 1814 | 王立   | 男       | 1996-02-11 00:00:00 | B1602   |
| 1815 | 欧锦   | 女       | 1997-06-23 00:00:00 | B1602   |
| 1816 | 王尼玛 | 女       | 1994-12-05 00:00:00 | B1603   |
| 1817 | 张全蛋 | 男       | 1996-02-11 00:00:00 | B1602   |
| 1818 | 赵铁柱 | 女       | 1997-06-23 00:00:00 | B1602   |
+------+--------+----------+---------------------+---------+
9 rows in set (0.02 sec)
</code></pre>

<h4 id="2-查询练习-student表中所有记录的s-name-s-gender-s-class列">2、查询练习-Student表中所有记录的s_name,s_gender,s_class列</h4>

<pre><code>mysql&gt; select s_name,s_gender,s_class from Student;
+--------+----------+---------+
| s_name | s_gender | s_class |
+--------+----------+---------+
| 张一   | 男       | B1604   |
| 李二   | 男       | B1605   |
| 孙钱   | 男       | B1604   |
| 赵雯   | 女       | B1603   |
| 王立   | 男       | B1602   |
| 欧锦   | 女       | B1602   |
| 王尼玛 | 女       | B1603   |
| 张全蛋 | 男       | B1602   |
| 赵铁柱 | 女       | B1602   |
+--------+----------+---------+
9 rows in set (0.00 sec)
</code></pre>

<h4 id="3-查询练习-教师所有的单位即不重复的depart列">3、查询练习-教师所有的单位即不重复的depart列</h4>

<pre><code>mysql&gt; select distinct t_depart from Teacher;
+------------+
| t_depart   |
+------------+
| 计算机系   |
| 电子工程系 |
+------------+
2 rows in set (0.00 sec)
</code></pre>

<h4 id="4-查询练习-score表中成绩在60-80之间的所有记录">4、查询练习-Score表中成绩在60-80之间的所有记录</h4>

<pre><code>mysql&gt; select * from Score where s_degree between 60 and 80;
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1811 | 3-105 |       75 |
| 1812 | 6-166 |       74 |
| 1813 | 6-166 |       75 |
| 1816 | 9-888 |       72 |
| 1818 | 6-166 |       79 |
+------+-------+----------+
5 rows in set (0.00 sec)

或者：
mysql&gt; select * from Score where s_degree&gt;60 and s_degree&lt;80;
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1811 | 3-105 |       75 |
| 1812 | 6-166 |       74 |
| 1813 | 6-166 |       75 |
| 1816 | 9-888 |       72 |
| 1818 | 6-166 |       79 |
+------+-------+----------+
5 rows in set (0.01 sec)
</code></pre>

<h4 id="5-查询练习-score表中成绩为85或86或88的记录">5、查询练习-Score表中成绩为85或86或88的记录</h4>

<pre><code>mysql&gt; select * from Score where s_degree in(85,86,88);
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1815 | 3-245 |       85 |
| 1818 | 3-105 |       85 |
+------+-------+----------+
2 rows in set (0.00 sec)
</code></pre>

<h4 id="6-查询练习-student表中-b1602-班或性别为-女-的同学记录">6、查询练习-Student表中“B1602”班或性别为“女”的同学记录</h4>

<pre><code>mysql&gt; select * from Student where s_class = 'B1602' or s_gender = '女';
+------+--------+----------+---------------------+---------+
| s_no | s_name | s_gender | s_birthday          | s_class |
+------+--------+----------+---------------------+---------+
| 1813 | 赵雯   | 女       | 1994-12-05 00:00:00 | B1603   |
| 1814 | 王立   | 男       | 1996-02-11 00:00:00 | B1602   |
| 1815 | 欧锦   | 女       | 1997-06-23 00:00:00 | B1602   |
| 1816 | 王尼玛 | 女       | 1994-12-05 00:00:00 | B1603   |
| 1817 | 张全蛋 | 男       | 1996-02-11 00:00:00 | B1602   |
| 1818 | 赵铁柱 | 女       | 1997-06-23 00:00:00 | B1602   |
+------+--------+----------+---------------------+---------+
6 rows in set (0.00 sec)
</code></pre>

<h4 id="7-查询练习-以class降序查询student表所有记录">7、查询练习-以class降序查询Student表所有记录</h4>

<pre><code>//降序
 mysql&gt; select * from Student order by s_class desc;
+------+--------+----------+---------------------+---------+
| s_no | s_name | s_gender | s_birthday          | s_class |
+------+--------+----------+---------------------+---------+
| 1811 | 李二   | 男       | 1991-10-02 00:00:00 | B1605   |
| 1810 | 张一   | 男       | 1990-09-01 00:00:00 | B1604   |
| 1812 | 孙钱   | 男       | 1992-11-03 00:00:00 | B1604   |
| 1813 | 赵雯   | 女       | 1994-12-05 00:00:00 | B1603   |
| 1816 | 王尼玛 | 女       | 1994-12-05 00:00:00 | B1603   |
| 1814 | 王立   | 男       | 1996-02-11 00:00:00 | B1602   |
| 1815 | 欧锦   | 女       | 1997-06-23 00:00:00 | B1602   |
| 1817 | 张全蛋 | 男       | 1996-02-11 00:00:00 | B1602   |
| 1818 | 赵铁柱 | 女       | 1997-06-23 00:00:00 | B1602   |
+------+--------+----------+---------------------+---------+
9 rows in set (0.02 sec)

//升序，默认升序
mysql&gt; select * from Student order by s_class asc;
+------+--------+----------+---------------------+---------+
| s_no | s_name | s_gender | s_birthday          | s_class |
+------+--------+----------+---------------------+---------+
| 1814 | 王立   | 男       | 1996-02-11 00:00:00 | B1602   |
| 1815 | 欧锦   | 女       | 1997-06-23 00:00:00 | B1602   |
| 1817 | 张全蛋 | 男       | 1996-02-11 00:00:00 | B1602   |
| 1818 | 赵铁柱 | 女       | 1997-06-23 00:00:00 | B1602   |
| 1813 | 赵雯   | 女       | 1994-12-05 00:00:00 | B1603   |
| 1816 | 王尼玛 | 女       | 1994-12-05 00:00:00 | B1603   |
| 1810 | 张一   | 男       | 1990-09-01 00:00:00 | B1604   |
| 1812 | 孙钱   | 男       | 1992-11-03 00:00:00 | B1604   |
| 1811 | 李二   | 男       | 1991-10-02 00:00:00 | B1605   |
+------+--------+----------+---------------------+---------+
9 rows in set (0.00 sec)
</code></pre>

<h4 id="8-查询练习-以c-no升序-degree降序查询score表的所有记录">8、查询练习-以c_no升序、degree降序查询score表的所有记录</h4>

<pre><code>mysql&gt; select * from Score order by c_no asc,s_degree desc;
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1818 | 3-105 |       85 |
| 1811 | 3-105 |       75 |
| 1810 | 3-105 |       56 |
| 1814 | 3-245 |       93 |
| 1815 | 3-245 |       85 |
| 1812 | 3-245 |       84 |
| 1818 | 6-166 |       79 |
| 1813 | 6-166 |       75 |
| 1812 | 6-166 |       74 |
| 1810 | 9-888 |       97 |
| 1817 | 9-888 |       89 |
| 1816 | 9-888 |       72 |
+------+-------+----------+
12 rows in set (0.00 sec)
</code></pre>

<h4 id="9-查询练习-查询-b1602-班的学生人数">9、查询练习-查询&rdquo;B1602&rdquo;班的学生人数</h4>

<pre><code>mysql&gt; select count(*) from Student where s_class = 'B1602';
+----------+
| count(*) |
+----------+
|        4 |
+----------+
1 row in set (0.01 sec)
</code></pre>

<h4 id="10-查询练习-score表中的最高分的学生学号课程号-子查询或者排序">10、查询练习-Score表中的最高分的学生学号课程号（子查询或者排序）</h4>

<pre><code>mysql&gt; select s_no,c_no from Score where s_degree = (select max(s_degree) from Score);
+------+-------+
| s_no | c_no  |
+------+-------+
| 1810 | 9-888 |
+------+-------+
1 row in set (0.01 sec)

//排序的方法
mysql&gt; select s_no,c_no, s_degree from Score order by s_degree desc limit 0,1 ;
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1810 | 9-888 |       97 |
+------+-------+----------+
1 row in set (0.00 sec)
//limit后面第一个数字表示从多少开始
//第二个数字表示查询几条数据
</code></pre>

<h4 id="11-查询练习-分组计算平均成绩">11、查询练习-分组计算平均成绩</h4>

<p>查询每门课的平均成绩</p>

<pre><code>//查询一门课的平均成绩
mysql&gt; select avg(s_degree) from Score where c_no = '3-105';
+---------------+
| avg(s_degree) |
+---------------+
|       72.0000 |
+---------------+
1 row in set (0.05 sec)

//查询每门课的平均成绩
mysql&gt; select avg(s_degree) from Score group by c_no;
+---------------+
| avg(s_degree) |
+---------------+
|       72.0000 |
|       87.3333 |
|       76.0000 |
|       86.0000 |
+---------------+
4 rows in set (0.05 sec)
</code></pre>

<h4 id="12-查询练习-分组条件与模糊查询">12、查询练习-分组条件与模糊查询</h4>

<p>查询Score表中至少有2名学生选修的并以3开头的课程的平均分数</p>

<pre><code>mysql&gt; select c_no, avg(s_degree),count(*) from Score group by c_no having count(s_no)&gt;=2 and c_no like '3%';
+-------+---------------+----------+
| c_no  | avg(s_degree) | count(*) |
+-------+---------------+----------+
| 3-105 |       72.0000 |        3 |
| 3-245 |       87.3333 |        3 |
+-------+---------------+----------+
2 rows in set (0.00 sec)
</code></pre>

<h4 id="13-查询练习-范围查询的两种方式">13、查询练习-范围查询的两种方式</h4>

<p>查询分数大于70，小于90的s_no列</p>

<pre><code> mysql&gt; select s_no,s_degree from Score where s_degree&gt;70 and s_degree&lt;90;
+------+----------+
| s_no | s_degree |
+------+----------+
| 1811 |       75 |
| 1812 |       84 |
| 1812 |       74 |
| 1813 |       75 |
| 1815 |       85 |
| 1816 |       72 |
| 1817 |       89 |
| 1818 |       85 |
| 1818 |       79 |
+------+----------+
9 rows in set (0.00 sec)

//或者：
mysql&gt; select s_no,s_degree from Score where s_degree between 70 and 90;
+------+----------+
| s_no | s_degree |
+------+----------+
| 1811 |       75 |
| 1812 |       84 |
| 1812 |       74 |
| 1813 |       75 |
| 1815 |       85 |
| 1816 |       72 |
| 1817 |       89 |
| 1818 |       85 |
| 1818 |       79 |
+------+----------+
9 rows in set (0.00 sec)
</code></pre>

<p>#### 14、查询练习-多表查询
查询所有学生的s_name、c_no、和s_degree列</p>

<pre><code> //学生表中的s_no,s_name
mysql&gt; select s_no,s_name from Student;
+------+--------+
| s_no | s_name |
+------+--------+
| 1810 | 张一   |
| 1811 | 李二   |
| 1812 | 孙钱   |
| 1813 | 赵雯   |
| 1814 | 王立   |
| 1815 | 欧锦   |
| 1816 | 王尼玛 |
| 1817 | 张全蛋 |
| 1818 | 赵铁柱 |
+------+--------+
9 rows in set (0.00 sec)

//成绩表中的s_no,c_no和s_degree
mysql&gt; select s_no,c_no,s_degree from Score;
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1810 | 3-105 |       56 |
| 1810 | 9-888 |       97 |
| 1811 | 3-105 |       75 |
| 1812 | 3-245 |       84 |
| 1812 | 6-166 |       74 |
| 1813 | 6-166 |       75 |
| 1814 | 3-245 |       93 |
| 1815 | 3-245 |       85 |
| 1816 | 9-888 |       72 |
| 1817 | 9-888 |       89 |
| 1818 | 3-105 |       85 |
| 1818 | 6-166 |       79 |
+------+-------+----------+
12 rows in set (0.00 sec)

//合并两个表就是通过相同的s_no
mysql&gt; select s_name, c_no, s_degree from Student,Score where Student.s_no = Score.s_no;
+--------+-------+----------+
| s_name | c_no  | s_degree |
+--------+-------+----------+
| 张一   | 3-105 |       56 |
| 张一   | 9-888 |       97 |
| 李二   | 3-105 |       75 |
| 孙钱   | 3-245 |       84 |
| 孙钱   | 6-166 |       74 |
| 赵雯   | 6-166 |       75 |
| 王立   | 3-245 |       93 |
| 欧锦   | 3-245 |       85 |
| 王尼玛 | 9-888 |       72 |
| 张全蛋 | 9-888 |       89 |
| 赵铁柱 | 3-105 |       85 |
| 赵铁柱 | 6-166 |       79 |
+--------+-------+----------+
12 rows in set (0.00 sec)
</code></pre>

<p>#### 15、查询练习-多表查询
查询所有学生的s_no,c_name,s_degree列</p>

<pre><code>mysql&gt;  select s_no,c_name,s_degree from Course,Score where Course.c_no = Score.c_no;
+------+------------+----------+
| s_no | c_name     | s_degree |
+------+------------+----------+
| 1810 | 计算机导论 |       56 |
| 1811 | 计算机导论 |       75 |
| 1818 | 计算机导论 |       85 |
| 1812 | 操作系统   |       84 |
| 1814 | 操作系统   |       93 |
| 1815 | 操作系统   |       85 |
| 1812 | 数字电路   |       74 |
| 1813 | 数字电路   |       75 |
| 1818 | 数字电路   |       79 |
| 1810 | 高等数学   |       97 |
| 1816 | 高等数学   |       72 |
| 1817 | 高等数学   |       89 |
+------+------------+----------+
12 rows in set (0.05 sec)
</code></pre>

<p>#### 16、查询练习-三表关联查询
查询所有学生的s_name,c_name,和s_degree列</p>

<pre><code>mysql&gt; select s_name,c_name,s_degree from Student,Course,Score where Student.s_no = Score.s_no and Course.c_no = Score.c_no;
+--------+------------+----------+
| s_name | c_name     | s_degree |
+--------+------------+----------+
| 张一   | 计算机导论 |       56 |
| 李二   | 计算机导论 |       75 |
| 赵铁柱 | 计算机导论 |       85 |
| 孙钱   | 操作系统   |       84 |
| 王立   | 操作系统   |       93 |
| 欧锦   | 操作系统   |       85 |
| 孙钱   | 数字电路   |       74 |
| 赵雯   | 数字电路   |       75 |
| 赵铁柱 | 数字电路   |       79 |
| 张一   | 高等数学   |       97 |
| 王尼玛 | 高等数学   |       72 |
| 张全蛋 | 高等数学   |       89 |
+--------+------------+----------+
12 rows in set (0.00 sec)
</code></pre>

<h4 id="17-查询练习-子查询加分组求平均分">17、查询练习-子查询加分组求平均分</h4>

<p>查询&rdquo;B1602&rdquo;班学生每门课的平均分</p>

<pre><code>//首先查询&quot;B602&quot;班学生的学号
mysql&gt; select s_no from Student where s_class = &quot;B1602&quot;;
+------+
| s_no |
+------+
| 1814 |
| 1815 |
| 1817 |
| 1818 |
+------+
4 rows in set (0.00 sec)

//然后查询这些学号的学生的成绩和对应的课程号
mysql&gt; select * from Score where s_no in(select s_no from Student where s_class = &quot;B1602&quot;);
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1814 | 3-245 |       93 |
| 1815 | 3-245 |       85 |
| 1817 | 9-888 |       89 |
| 1818 | 3-105 |       85 |
| 1818 | 6-166 |       79 |
+------+-------+----------+
5 rows in set (0.00 sec)

//最后修改sql语句，查询学生每门课的平均分

mysql&gt; select c_no,avg(s_degree) from Score where s_no in(select s_no from Student where s_class = &quot;B1602&quot;)  group by c_no;
+-------+---------------+
| c_no  | avg(s_degree) |
+-------+---------------+
| 3-245 |       89.0000 |
| 9-888 |       89.0000 |
| 3-105 |       85.0000 |
| 6-166 |       79.0000 |
+-------+---------------+
4 rows in set (0.05 sec)
</code></pre>

<p>####　18、查询练习-子查询
查询选修&rdquo;3-105&rdquo;课程的成绩高于&rdquo;1810&rdquo;号同学&rdquo;3-105&rdquo;成绩的所有同学的记录</p>

<pre><code>//首先查询选修&quot;3-105&quot;课程并且学号是&quot;1810&quot;的同学的成绩
mysql&gt;  select s_degree from Score where s_no = &quot;1810&quot; and c_no = &quot;3-105&quot;;
+----------+
| s_degree |
+----------+
|       56 |
+----------+
1 row in set (0.00 sec)
//最后查询在&quot;3-105&quot;课程并且比&quot;1810&quot;号同学成绩高的同学的记录
mysql&gt; select * from Score where c_no = &quot;3-105&quot; and s_degree &gt; ( select s_degree from Score where s_no = &quot;1810&quot; and c_no = &quot;3-105&quot;);
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1811 | 3-105 |       75 |
| 1818 | 3-105 |       85 |
+------+-------+----------+
2 rows in set (0.00 sec)
</code></pre>

<h4 id="19-查询练习-子查询">19、查询练习-子查询</h4>

<p>查询成绩高于学号&rdquo;1810&rdquo;、课程号为&rdquo;3-105&rdquo;的成绩的所有记录</p>

<pre><code class="language-mysql&gt;">+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1810 | 9-888 |       97 |
| 1811 | 3-105 |       75 |
| 1812 | 3-245 |       84 |
| 1812 | 6-166 |       74 |
| 1813 | 6-166 |       75 |
| 1814 | 3-245 |       93 |
| 1815 | 3-245 |       85 |
| 1816 | 9-888 |       72 |
| 1817 | 9-888 |       89 |
| 1818 | 3-105 |       85 |
| 1818 | 6-166 |       79 |
+------+-------+----------+
11 rows in set (0.00 sec)
</code></pre>

<h4 id="20-查询练习-year函数与带in关键字的子查询">20、查询练习-year函数与带in关键字的子查询</h4>

<p>查询和学号&rdquo;1810&rdquo;、&rdquo;1818&rdquo;同学同年出生的所有学生的s_no、s_name、s_birthday列</p>

<pre><code>//首先查询学号为&quot;1810&quot;、&quot;1818&quot;同学出现的年份
mysql&gt; select year(s_birthday) from Student where s_no in(1810,1818);
+------------------+
| year(s_birthday) |
+------------------+
|             1990 |
|             1997 |
+------------------+
2 rows in set (0.05 sec)
//然后再查询和这两个同学年份想同的s_no、s_name、s_birthday列
mysql&gt; select s_no,s_name,s_birthday from Student where year(s_birthday) in(select year(s_birthday) from Student where s_no in(1810,1818));
+------+--------+---------------------+
| s_no | s_name | s_birthday          |
+------+--------+---------------------+
| 1810 | 张一   | 1990-09-01 00:00:00 |
| 1815 | 欧锦   | 1997-06-23 00:00:00 |
| 1818 | 赵铁柱 | 1997-06-23 00:00:00 |
+------+--------+---------------------+
3 rows in set (0.05 sec)
</code></pre>

<h4 id="21-查询练习-多层嵌套子查询">21、查询练习-多层嵌套子查询</h4>

<p>查询&rdquo;张旭&rdquo;教师任课的学生成绩</p>

<pre><code>//首先查询张旭教师的教师编号
mysql&gt;  select t_no from Teacher where t_name  = &quot;张旭&quot;;
+------+
| t_no |
+------+
| 805  |
+------+
1 row in set (0.00 sec)
//然后查询教师编号为&quot;805&quot;的课程编号

mysql&gt; select c_no from Course where t_no in (select t_no from Teacher where t_name  = &quot;张旭&quot;);
+-------+
| c_no  |
+-------+
| 6-166 |
+-------+
1 row in set (0.05 sec)
//最后查询&quot;张旭&quot;教师任课的学生成绩
mysql&gt; select * from Score where c_no in(select c_no from Course where t_no =(select t_no from Teacher where t_name  = &quot;张旭&quot;));
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1812 | 6-166 |       74 |
| 1813 | 6-166 |       75 |
| 1818 | 6-166 |       79 |
+------+-------+----------+
3 rows in set (0.05 sec)
</code></pre>

<h4 id="22-查询练习-多表查询">22、查询练习-多表查询</h4>

<p>查询选修某课程的同学人数大余3人的教师姓名</p>

<pre><code>//首先查询同学人数大于3的课程号
mysql&gt; select c_no from Score group by c_no having count(*) &gt; 3;
+-------+
| c_no  |
+-------+
| 3-105 |
+-------+
1 row in set (0.00 sec)

//然后查询该课程号下的教师编号
mysql&gt; select t_no from Course where c_no =(select c_no from Score group by c_no having count(*) &gt; 3);
+------+
| t_no |
+------+
| 803  |
+------+
1 row in set (0.00 sec)

//最后通过教师编号查询到教师姓名
mysql&gt; select t_name from Teacher where t_no = (select t_no from Course where c_no =(select c_no from Score group by c_no having count(*) &gt; 3));
+--------+
| t_name |
+--------+
| 李承   |
+--------+
1 row in set (0.00 sec)
</code></pre>

<h4 id="23-查询练习-in表示或者关系">23、查询练习-in表示或者关系</h4>

<p>查询&rdquo;B1602&rdquo;和&rdquo;B1604&rdquo;班所有学生的记录</p>

<pre><code>mysql&gt; select * from student where s_class in('B1602','B1604');
+------+--------+----------+---------------------+---------+
| s_no | s_name | s_gender | s_birthday          | s_class |
+------+--------+----------+---------------------+---------+
| 1810 | 张一   | 男       | 1990-09-01 00:00:00 | B1604   |
| 1812 | 孙钱   | 男       | 1992-11-03 00:00:00 | B1604   |
| 1814 | 王立   | 男       | 1996-02-11 00:00:00 | B1602   |
| 1815 | 欧锦   | 女       | 1997-06-23 00:00:00 | B1602   |
| 1817 | 张全蛋 | 男       | 1996-02-11 00:00:00 | B1602   |
| 1818 | 赵铁柱 | 女       | 1997-06-23 00:00:00 | B1602   |
+------+--------+----------+---------------------+---------+
6 rows in set (0.00 sec)
</code></pre>

<h4 id="24-查询练习-where条件查询">24、查询练习-where条件查询</h4>

<p>查询存在有85分以上成绩的课程c_no</p>

<pre><code>mysql&gt; select c_no,s_degree from Score where s_degree&gt;85;
+-------+----------+
| c_no  | s_degree |
+-------+----------+
| 9-888 |       97 |
| 3-245 |       93 |
| 9-888 |       89 |
+-------+----------+
3 rows in set (0.00 sec)
</code></pre>

<h4 id="25-查询练习-子查询">25、查询练习-子查询</h4>

<p>查询出&rdquo;计算机系&rdquo;教师所教课程的成绩表</p>

<pre><code>//首先查询&quot;计算机系&quot;教师的信息
mysql&gt; select * from Teacher where t_depart = &quot;计算机系&quot; ;
+------+--------+----------+---------------------+--------+----------+
| t_no | t_name | t_gender | t_birthday          | t_prof | t_depart |
+------+--------+----------+---------------------+--------+----------+
| 803  | 李承   | 男       | 1968-09-03 00:00:00 | 副教授 | 计算机系 |
| 808  | 王萍   | 女       | 1977-05-05 00:00:00 | 助教   | 计算机系 |
+------+--------+----------+---------------------+--------+----------+
2 rows in set (0.01 sec)

//然后通过教师编号t_no查询课程编号c_no
mysql&gt; select c_no from course where t_no in(select t_no from Teacher where t_depart = &quot;计算机系&quot; );
+-------+
| c_no  |
+-------+
| 3-105 |
| 3-245 |
+-------+
2 rows in set (0.00 sec)

//最后通过课程编号查询课程的成绩表
mysql&gt; select * from Score where c_no in( select c_no from course where t_no in(select t_no from Teacher where t_depart = &quot;计算机系&quot; ));
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1810 | 3-105 |       56 |
| 1811 | 3-105 |       75 |
| 1817 | 3-105 |       77 |
| 1818 | 3-105 |       85 |
| 1812 | 3-245 |       84 |
| 1814 | 3-245 |       93 |
| 1815 | 3-245 |       85 |
+------+-------+----------+
7 rows in set (0.00 sec)
</code></pre>

<h4 id="26-查询练习-union和not-in-的使用">26、查询练习-union和not in 的使用</h4>

<p>查询&rdquo;计算机系&rdquo;与&rdquo;电子工程系&rdquo;不同职称的教师的t_name和t_prof</p>

<pre><code>mysql&gt; select t_name,t_prof from Teacher where t_depart = &quot;计算机系&quot; and t_prof not in(select t_prof from Teacher where t_depart = &quot;电子工程系&quot;);
+--------+--------+
| t_name | t_prof |
+--------+--------+
| 李承   | 副教授 |
+--------+--------+
1 row in set (0.01 sec)

mysql&gt; select t_name,t_prof from Teacher where t_depart = &quot;电子工程系&quot; and t_prof not in(select t_prof from Teacher where t_depart = &quot;计算机系&quot;);
+--------+--------+
| t_name | t_prof |
+--------+--------+
| 张旭   | 讲师   |
+--------+--------+
1 row in set (0.00 sec)

//使用union求并集
mysql&gt; select t_name,t_prof from Teacher where t_depart = &quot;计算机系&quot; and t_prof not in(select t_prof from Teacher where t_depart = &quot;电子工程系&quot;)
    -&gt; union
    -&gt; select t_name,t_prof from Teacher where t_depart = &quot;电子工程系&quot; and t_prof not in(select t_prof from Teacher where t_depart = &quot;计算机系&quot;);
+--------+--------+
| t_name | t_prof |
+--------+--------+
| 李承   | 副教授 |
| 张旭   | 讲师   |
+--------+--------+
2 rows in set (0.01 sec)
</code></pre>

<h4 id="27-查询练习-any表示至少">27、查询练习-any表示至少</h4>

<p>查询选修编号为&rdquo;3-245&rdquo;课程且成绩至少高于选修编号为&rdquo;3-105&rdquo;的同学的c_no,s_no和s_degree，并按s_degree从高到低次序排序</p>

<pre><code>//至少高于表示大于其中至少一个，用any
mysql&gt; select * from Score where c_no = &quot;3-245&quot; and  s_degree &gt; any(select s_degree from Score where c_no = &quot;3-105&quot;) ;
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1812 | 3-245 |       84 |
| 1814 | 3-245 |       93 |
| 1815 | 3-245 |       85 |
+------+-------+----------+
3 rows in set (0.01 sec)

//最后按s_degree从高到低次序排序
mysql&gt; select * from Score where c_no = &quot;3-245&quot; and  s_degree &gt; any(select s_degree from Score where c_no = &quot;3-105&quot;)order by s_degree desc ;
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1814 | 3-245 |       93 |
| 1815 | 3-245 |       85 |
| 1812 | 3-245 |       84 |
+------+-------+----------+
3 rows in set (0.00 sec)
</code></pre>

<h4 id="28-查询练习-all表示所有">28、查询练习-all表示所有</h4>

<p>查询选修编号为&rdquo;3-245&rdquo;且成绩高于选修编号为&rdquo;3-105&rdquo;课程的同学的c_no，s_no，s_degree</p>

<pre><code>//且，表示所有的关系用 all
mysql&gt; select * from Score where c_no = &quot;3-245&quot; and  s_degree &gt; all(select s_degree from Score where c_no = &quot;3-105&quot;) ;
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1814 | 3-245 |       93 |
+------+-------+----------+
1 row in set (0.00 sec)
</code></pre>

<h4 id="29-查询练习-as取别名-union求并集">29、查询练习-as取别名,union求并集</h4>

<p>查询所有教师和同学的name,gender和birthday</p>

<pre><code>//别名用 as
mysql&gt; select t_name as name,t_gender as gender,t_birthday as birthday from Teacher
    -&gt; union
    -&gt; select s_name,s_gender,s_birthday from Student;
+--------+--------+---------------------+
| name   | gender | birthday            |
+--------+--------+---------------------+
| 李承   | 男     | 1968-09-03 00:00:00 |
| 张旭   | 男     | 1969-01-03 00:00:00 |
| 王萍   | 女     | 1977-05-05 00:00:00 |
| 刘冰   | 女     | 1972-08-14 00:00:00 |
| 张一   | 男     | 1990-09-01 00:00:00 |
| 李二   | 男     | 1991-10-02 00:00:00 |
| 孙钱   | 男     | 1992-11-03 00:00:00 |
| 赵雯   | 女     | 1994-12-05 00:00:00 |
| 王立   | 男     | 1996-02-11 00:00:00 |
| 欧锦   | 女     | 1997-06-23 00:00:00 |
| 王尼玛 | 女     | 1994-12-05 00:00:00 |
| 张全蛋 | 男     | 1996-02-11 00:00:00 |
| 赵铁柱 | 女     | 1997-06-23 00:00:00 |
+--------+--------+---------------------+
13 rows in set (0.00 sec)
</code></pre>

<h4 id="30-查询练习-union求并集">30、查询练习-union求并集</h4>

<p>查询所有&rdquo;女&rdquo;教师和&rdquo;女&rdquo;同学的name,gender,和birthday</p>

<pre><code>//查询所有女教师的name,gender和birthday
mysql&gt; select t_name,t_gender, t_birthday from Teacher where t_gender = &quot;女&quot;;
+--------+----------+---------------------+
| t_name | t_gender | t_birthday          |
+--------+----------+---------------------+
| 王萍   | 女       | 1977-05-05 00:00:00 |
| 刘冰   | 女       | 1972-08-14 00:00:00 |
+--------+----------+---------------------+
2 rows in set (0.05 sec)

//查询所有女学生的name,gender,birthday
mysql&gt; select s_name, s_gender, s_birthday from Student where s_gender = &quot;女&quot;;
+--------+----------+---------------------+
| s_name | s_gender | s_birthday          |
+--------+----------+---------------------+
| 赵雯   | 女       | 1994-12-05 00:00:00 |
| 欧锦   | 女       | 1997-06-23 00:00:00 |
| 王尼玛 | 女       | 1994-12-05 00:00:00 |
| 赵铁柱 | 女       | 1997-06-23 00:00:00 |
+--------+----------+---------------------+
4 rows in set (0.00 sec)

//最后合并
mysql&gt; select t_name as name,t_gender as gender, t_birthday as birthday from Teacher where t_gender = &quot;女&quot;
    -&gt; union
    -&gt; select s_name, s_gender, s_birthday from Student where s_gender = &quot;女&quot;;
+--------+--------+---------------------+
| name   | gender | birthday            |
+--------+--------+---------------------+
| 王萍   | 女     | 1977-05-05 00:00:00 |
| 刘冰   | 女     | 1972-08-14 00:00:00 |
| 赵雯   | 女     | 1994-12-05 00:00:00 |
| 欧锦   | 女     | 1997-06-23 00:00:00 |
| 王尼玛 | 女     | 1994-12-05 00:00:00 |
| 赵铁柱 | 女     | 1997-06-23 00:00:00 |
+--------+--------+---------------------+
6 rows in set (0.00 sec)
</code></pre>

<h4 id="31-查询练习-复制表数据做条件查询">31、查询练习-复制表数据做条件查询</h4>

<p>查询成绩比该课程平均价成绩低的同学的成绩表</p>

<pre><code>mysql&gt; select * from Score a where s_degree &lt;(select avg(s_degree) from Score b where a.c_no = b.c_no);
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1810 | 3-105 |       56 |
| 1812 | 3-245 |       84 |
| 1812 | 6-166 |       74 |
| 1813 | 6-166 |       75 |
| 1815 | 3-245 |       85 |
| 1816 | 9-888 |       72 |
+------+-------+----------+
6 rows in set (0.05 sec)
</code></pre>

<h4 id="32-查询练习-子查询">32、查询练习-子查询</h4>

<p>查询所有任课教师的t_name和t_depart</p>

<pre><code>//查询任课教师需要先查询哪些教师有课
mysql&gt; select * from Course;
+-------+------------+------+
| c_no  | c_name     | t_no |
+-------+------------+------+
| 3-105 | 计算机导论 | 803  |
| 3-245 | 操作系统   | 808  |
| 6-166 | 数字电路   | 805  |
| 9-888 | 高等数学   | 810  |
+-------+------------+------+
4 rows in set (0.00 sec)

//最后在查询任课老师的t_name和t_depart
mysql&gt; select t_name,t_depart from Teacher where t_no in(select t_no from Course);
+--------+------------+
| t_name | t_depart   |
+--------+------------+
| 李承   | 计算机系   |
| 张旭   | 电子工程系 |
| 王萍   | 计算机系   |
| 刘冰   | 电子工程系 |
+--------+------------+
4 rows in set (0.00 sec)
</code></pre>

<h4 id="33-查询练习-条件加分组删选">33、查询练习-条件加分组删选</h4>

<p>查询至少有2名男生的班号</p>

<pre><code>mysql&gt; select s_class ,count(*) from Student  where s_gender = &quot;男&quot; group by s_class having count(*)&gt;=2;
+---------+----------+
| s_class | count(*) |
+---------+----------+
| B1604   |        2 |
| B1602   |        2 |
+---------+----------+
2 rows in set (0.00 sec)
</code></pre>

<h4 id="34-查询练习-not-like模糊查询取反">34、查询练习-not like模糊查询取反</h4>

<p>查询Student表中不姓&rdquo;王&rdquo;的同学记录</p>

<pre><code>mysql&gt; select * from Student where s_name not like '王%';
+------+--------+----------+---------------------+---------+
| s_no | s_name | s_gender | s_birthday          | s_class |
+------+--------+----------+---------------------+---------+
| 1810 | 张一   | 男       | 1990-09-01 00:00:00 | B1604   |
| 1811 | 李二   | 男       | 1991-10-02 00:00:00 | B1605   |
| 1812 | 孙钱   | 男       | 1992-11-03 00:00:00 | B1604   |
| 1813 | 赵雯   | 女       | 1994-12-05 00:00:00 | B1603   |
| 1815 | 欧锦   | 女       | 1997-06-23 00:00:00 | B1602   |
| 1817 | 张全蛋 | 男       | 1996-02-11 00:00:00 | B1602   |
| 1818 | 赵铁柱 | 女       | 1997-06-23 00:00:00 | B1602   |
+------+--------+----------+---------------------+---------+
7 rows in set (0.05 sec)
</code></pre>

<h4 id="35-查询练习-year函数和now函数">35、查询练习-year函数和now函数</h4>

<p>查询Student表中每个学生的姓名和年龄</p>

<pre><code>//年龄：当前年份-出生年份
//当前年份
mysql&gt; select year(now());
+-------------+
| year(now()) |
+-------------+
|        2019 |
+-------------+
1 row in set (0.05 sec)

//最后查询Student表中每个学生的姓名和年龄
mysql&gt; select s_name, year(now())-year(s_birthday) as &quot;年龄&quot; from Student;
+--------+------+
| s_name | 年龄 |
+--------+------+
| 张一   |   29 |
| 李二   |   28 |
| 孙钱   |   27 |
| 赵雯   |   25 |
| 王立   |   23 |
| 欧锦   |   22 |
| 王尼玛 |   25 |
| 张全蛋 |   23 |
| 赵铁柱 |   22 |
+--------+------+
9 rows in set (0.05 sec)
</code></pre>

<h4 id="36-查询练习-max和min函数">36、查询练习-max和min函数</h4>

<p>查询Student表中最大和最小的s_birthday日期值</p>

<pre><code>mysql&gt; select max(s_birthday),min(s_birthday) from Student;
+---------------------+---------------------+
| max(s_birthday)     | min(s_birthday)     |
+---------------------+---------------------+
| 1997-06-23 00:00:00 | 1990-09-01 00:00:00 |
+---------------------+---------------------+
1 row in set (0.00 sec)
</code></pre>

<h4 id="37-查询练习-多字段排序">37、查询练习-多字段排序</h4>

<p>以班号和年龄从大到小的顺序查询Student表中的全部记录</p>

<pre><code>  mysql&gt; select * from Student order by s_no desc , s_birthday asc;
+------+--------+----------+---------------------+---------+
| s_no | s_name | s_gender | s_birthday          | s_class |
+------+--------+----------+---------------------+---------+
| 1818 | 赵铁柱 | 女       | 1997-06-23 00:00:00 | B1602   |
| 1817 | 张全蛋 | 男       | 1996-02-11 00:00:00 | B1602   |
| 1816 | 王尼玛 | 女       | 1994-12-05 00:00:00 | B1603   |
| 1815 | 欧锦   | 女       | 1997-06-23 00:00:00 | B1602   |
| 1814 | 王立   | 男       | 1996-02-11 00:00:00 | B1602   |
| 1813 | 赵雯   | 女       | 1994-12-05 00:00:00 | B1603   |
| 1812 | 孙钱   | 男       | 1992-11-03 00:00:00 | B1604   |
| 1811 | 李二   | 男       | 1991-10-02 00:00:00 | B1605   |
| 1810 | 张一   | 男       | 1990-09-01 00:00:00 | B1604   |
+------+--------+----------+---------------------+---------+
9 rows in set (0.05 sec)
</code></pre>

<h4 id="38-查询练习-子查询">38、查询练习-子查询</h4>

<p>查询&rdquo;男&rdquo;教师及所上的课程</p>

<pre><code>mysql&gt; select * from course where t_no in (select t_no from Teacher where t_gender = &quot;男&quot;);
+-------+------------+------+
| c_no  | c_name     | t_no |
+-------+------------+------+
| 3-105 | 计算机导论 | 803  |
| 6-166 | 数字电路   | 805  |
+-------+------------+------+
2 rows in set (0.00 sec)
</code></pre>

<h4 id="39-查询练习-max函数与子查询">39、查询练习-max函数与子查询</h4>

<p>查询最高分同学的s_no,c_no,和s_degree列</p>

<pre><code>mysql&gt; select * from Score where s_degree = (select max(s_degree) from Score);
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1810 | 9-888 |       97 |
+------+-------+----------+
1 row in set (0.00 sec)

</code></pre>

<h4 id="40-查询练习-子查询">40、查询练习-子查询</h4>

<p>查询和&rdquo;王立&rdquo;同性别的所有同学的s_name</p>

<pre><code>mysql&gt; select s_name from Student where s_gender = (select s_gender from Student where s_name = &quot;王立&quot;);
+--------+
| s_name |
+--------+
| 张一   |
| 李二   |
| 孙钱   |
| 王立   |
| 张全蛋 |
+--------+
5 rows in set (0.00 sec)
</code></pre>

<h4 id="41-查询练习-子查询">41、查询练习-子查询</h4>

<p>查询和&rdquo;王立&rdquo;同性别并同班的同学的s_name</p>

<pre><code>mysql&gt; select s_name from Student where s_gender = (select s_gender from Student where s_name = &quot;王立&quot;) and s_class = (select s_class from Student where s_name = &quot;王立&quot;);
+--------+
| s_name |
+--------+
| 王立   |
| 张全蛋 |
+--------+
2 rows in set (0.00 sec)
</code></pre>

<h4 id="42-查询练习-子查询">42、查询练习-子查询</h4>

<p>查询所有选修&rdquo;计算机导论&rdquo;课程的&rdquo;男&rdquo;同学的成绩表</p>

<pre><code>//查询&quot;计算机导论&quot;课程的课程编号
mysql&gt; select c_no from Course where c_name = &quot;计算机导论&quot;;
+-------+
| c_no  |
+-------+
| 3-105 |
+-------+
1 row in set (0.00 sec)

//查询&quot;男&quot;同学的学生编号
mysql&gt; select s_no from Student where s_gender = &quot;男&quot;;
+------+
| s_no |
+------+
| 1810 |
| 1811 |
| 1812 |
| 1814 |
| 1817 |
+------+
5 rows in set (0.00 sec)

//最后整合
mysql&gt; select * from Score where c_no = (select c_no from Course where c_name = &quot;计算机导论&quot;) and s_no in (select s_no from Student where s_gender = &quot;男&quot;);
+------+-------+----------+
| s_no | c_no  | s_degree |
+------+-------+----------+
| 1810 | 3-105 |       56 |
| 1811 | 3-105 |       75 |
| 1817 | 3-105 |       77 |
+------+-------+----------+
3 rows in set (0.00 sec)
</code></pre>

<h4 id="43-查询练习-按等级查询">43、查询练习-按等级查询</h4>

<p>假设使用如下命令建立了以恶grade表：
create table grade(
    low int(3),
    upp int(3),
    grade char(1)
);
insert into grade values(90,100,&lsquo;A&rsquo;);
insert into grade values(80,89,&lsquo;B&rsquo;);
insert into grade values(70,79,&lsquo;C&rsquo;);
insert into grade values(60,69,&rsquo;D&rsquo;);
insert into grade values(0,59,&lsquo;E&rsquo;);
现查询所有同学的s_no,c_no,grade列。</p>

<pre><code>mysql&gt;  select s_no,c_no,grade from Score, grade where s_degree between low and upp;
+------+-------+-------+
| s_no | c_no  | grade |
+------+-------+-------+
| 1810 | 3-105 | E     |
| 1810 | 9-888 | A     |
| 1811 | 3-105 | C     |
| 1812 | 3-245 | B     |
| 1812 | 6-166 | C     |
| 1813 | 6-166 | C     |
| 1814 | 3-245 | A     |
| 1815 | 3-245 | B     |
| 1816 | 9-888 | C     |
| 1817 | 3-105 | C     |
| 1817 | 9-888 | B     |
| 1818 | 3-105 | B     |
| 1818 | 6-166 | C     |
+------+-------+-------+
13 rows in set (0.00 sec)
</code></pre>

<h2 id="mysql连接查询">mysql连接查询</h2>

<pre><code>内连接  
inner join　或者　join

外连接  
1.左连接　left join　或者　left outer join  
2.右链接　right join　或者　right outer join  
3.完全外连接　full join　或者　　full outer join  
</code></pre>

<pre><code>//首先先创建一个数据库:
create database testJoin;

//然后创建两个表：
person 表
id,
name,
cardId

create table person(
    id int,
    name varchar(20),
    cardId int
);

card 表
id,
name

create table card(
    id int,
    name varchar(20)
);

//然后往两个表里添加数据

insert into card values(1,'饭卡');
insert into card values(2,'建行卡');
insert into card values(3,'工商卡');
insert into card values(4,'农行卡');
insert into card values(5,'邮政卡');
mysql&gt; select * from card;
+------+--------+
| id   | name   |
+------+--------+
|    1 | 饭卡   |
|    2 | 建行卡 |
|    3 | 工商卡 |
|    4 | 农行卡 |
|    5 | 邮政卡 |
+------+--------+
5 rows in set (0.00 sec)

insert into person values(1,'张三',1);
insert into person values(2,'李四',3);
insert into person values(3,'王五',6);
mysql&gt; select * from person;
+------+------+--------+
| id   | name | cardId |
+------+------+--------+
|    1 | 张三 |      1 |
|    2 | 李四 |      3 |
|    3 | 王五 |      6 |
+------+------+--------+
3 rows in set (0.00 sec)
//我们并没有创建外键
</code></pre>

<h3 id="1-inner-join查询-内连接">1、inner join查询（内连接）</h3>

<pre><code>mysql&gt; select * from person inner join card on person.cardId = card.id;
+------+------+--------+------+--------+
| id   | name | cardId | id   | name   |
+------+------+--------+------+--------+
|    1 | 张三 |      1 |    1 | 饭卡   |
|    2 | 李四 |      3 |    3 | 工商卡 |
+------+------+--------+------+--------+
2 rows in set (0.00 sec)

//内联查询，其实就是两张表中的数据，通过某个字段相对，查询出相关记录数据
</code></pre>

<h3 id="2-left-join查询-左外连接">2、left join查询（左外连接）</h3>

<pre><code>mysql&gt; select * from person left join card on person.cardId = card.id;
+------+------+--------+------+--------+
| id   | name | cardId | id   | name   |
+------+------+--------+------+--------+
|    1 | 张三 |      1 |    1 | 饭卡   |
|    2 | 李四 |      3 |    3 | 工商卡 |
|    3 | 王五 |      6 | NULL | NULL   |
+------+------+--------+------+--------+
3 rows in set (0.00 sec)
//左外连接，会把左边表里面的所有数据取出来，而右边表中的数据，如果有相等的，就显示出来，如果没有，就会补NULL
</code></pre>

<h3 id="3-right-join查询-右外连接">3、right join查询(右外连接)</h3>

<pre><code>mysql&gt; select * from person right join card on person.cardId = card.id;
+------+------+--------+------+--------+
| id   | name | cardId | id   | name   |
+------+------+--------+------+--------+
|    1 | 张三 |      1 |    1 | 饭卡   |
|    2 | 李四 |      3 |    3 | 工商卡 |
| NULL | NULL |   NULL |    2 | 建行卡 |
| NULL | NULL |   NULL |    4 | 农行卡 |
| NULL | NULL |   NULL |    5 | 邮政卡 |
+------+------+--------+------+--------+
5 rows in set (0.00 sec)
//右外连接，会把右边表里面的所有数据取出来，而左边表中的数据，如果有相等的，就显示出来，如果没有，就会补NULL
</code></pre>

<h3 id="4-full-join查询-全外连接">4、full join查询（全外连接）</h3>

<pre><code>mysql不支持 full join,可以通过union实现全外连接
select * from person left join card on person.cardId = card.id
union
select * from person right join card on person.cardId = card.id;
mysql&gt; select * from person left join card on person.cardId = card.id
    -&gt; union
    -&gt; select * from person right join card on person.cardId = card.id;
+------+------+--------+------+--------+
| id   | name | cardId | id   | name   |
+------+------+--------+------+--------+
|    1 | 张三 |      1 |    1 | 饭卡   |
|    2 | 李四 |      3 |    3 | 工商卡 |
|    3 | 王五 |      6 | NULL | NULL   |
| NULL | NULL |   NULL |    2 | 建行卡 |
| NULL | NULL |   NULL |    4 | 农行卡 |
| NULL | NULL |   NULL |    5 | 邮政卡 |
+------+------+--------+------+--------+
6 rows in set (0.01 sec)
</code></pre>

<h2 id="mysql事务">mysql事务</h2>

<p>　　mysql中，事务其实是一个最小的不可分割的工作单元。能够保证一个业务的完整性。
比如我们的银行转账：</p>

<pre><code>　　a-&gt; -100
update user set money = money -100 where name = 'a';
　　b-&gt; +100
update user set money = money +100 where name = 'b';
</code></pre>

<p>　　实际的程序中，如果只有一条语句执行成功了，而另外一条没有执行成功，出现数据前后不一致。</p>

<pre><code>update user set money = money -100 where name = 'a';
update user set money = money +100 where name = 'b';
</code></pre>

<p>　　多条sql语句，可能会有同时成功的要求，要么就同时失败。<br />
　　那么mysql中如何控制事务？</p>

<h3 id="1-mysql默认是开启事务的-自动提交">1、mysql默认是开启事务的(自动提交)</h3>

<pre><code>mysql&gt; select @@autocommit;
+--------------+
| @@autocommit |
+--------------+
|            1 |
+--------------+
1 row in set (0.00 sec)
</code></pre>

<p>　　默认事务开启的作用是当我们去执行一个sql语句的时候，效果就会立即体现出来，且不能回滚。</p>

<pre><code>//创建一个bank数据库
create database bank;

//然后创建一个user表
create table user(
    id int primary key,
    name varchar(20),
    money int
);

//最后在表里添加字段
insert into user values(1,'张三',1000);
</code></pre>

<p>　　事务回滚就是撤销sql语句执行效果</p>

<pre><code>mysql&gt; rollback;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; select * from user;
+----+------+-------+
| id | name | money |
+----+------+-------+
|  1 | 张三 |  1000 |
+----+------+-------+
1 row in set (0.00 sec)
//可以发现是不能回滚的
</code></pre>

<h3 id="2-设置mysql自动提交为false">2、设置mysql自动提交为false</h3>

<pre><code>mysql&gt; set autocommit =0;
Query OK, 0 rows affected (0.01 sec)

mysql&gt; select @@autocommit;
+--------------+
| @@autocommit |
+--------------+
|            0 |
+--------------+
1 row in set (0.00 sec)
//上面的操作关闭了mysql的自动提交（commit）
</code></pre>

<p>　　关闭了mysql的自动提交之后我们再试试事务回滚操作。</p>

<pre><code>mysql&gt; insert into user values(2,'李四',2000);
Query OK, 1 row affected (0.01 sec)

mysql&gt; select * from user;
+----+------+-------+
| id | name | money |
+----+------+-------+
|  1 | 张三 |  1000 |
|  2 | 李四 |  2000 |
+----+------+-------+
2 rows in set (0.00 sec)

mysql&gt; rollback;
Query OK, 0 rows affected (0.05 sec)

mysql&gt; select * from user;
+----+------+-------+
| id | name | money |
+----+------+-------+
|  1 | 张三 |  1000 |
+----+------+-------+
1 row in set (0.00 sec)
</code></pre>

<p>　　既然如此，那我们想要在插入数据之后不能被回滚的话，该怎么操作？</p>

<pre><code>//插入数据
mysql&gt; insert into user values(2,'李四',2000);
Query OK, 1 row affected (0.00 sec)

//手动提交数据
mysql&gt; commit;
Query OK, 0 rows affected (0.01 sec)

//这样就不能撤销（持久性）
mysql&gt; rollback;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; select * from user;
+----+------+-------+
| id | name | money |
+----+------+-------+
|  1 | 张三 |  1000 |
|  2 | 李四 |  2000 |
+----+------+-------+
2 rows in set (0.00 sec)
</code></pre>

<h3 id="3-其他方法事务回滚">3、其他方法事务回滚</h3>

<p>　　可以使用begin;　或者start transaction;都可以帮我们手动开启一个事务。</p>

<pre><code>//首先张三取100给李四
mysql&gt; begin;

mysql&gt; update user set money = money-100 where name = '张三';
mysql&gt; update user set money = money+100 where name = '李四';

mysql&gt; select * from user;
+----+------+-------+
| id | name | money |
+----+------+-------+
|  1 | 张三 |   900 |
|  2 | 李四 |  2100 |
+----+------+-------+
2 rows in set (0.00 sec)

//这个时候我们使用rollback,发现可以事务回滚
mysql&gt; rollback;
Query OK, 0 rows affected (0.05 sec)

mysql&gt; select * from user;
+----+------+-------+
| id | name | money |
+----+------+-------+
|  1 | 张三 |  1000 |
|  2 | 李四 |  2000 |
+----+------+-------+
2 rows in set (0.00 sec)
</code></pre>

<h3 id="4-事务的四大特性">4、事务的四大特性</h3>

<pre><code>A 原子性(atomtic)：事务的最小单位，不可以再分割
C 一致性(consistent)：事务要求，同一事务中的sql语句，必须保证同时成功或者同时失败
I 隔离性(isolated)：事务1 和 事务2 之间是具有隔离性的
D 持久性(durable)：事务一旦结束(commit,rollback),就不可以回滚
</code></pre>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">标签</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://yato534.github.io/tags/mysql/">mysql</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--disabled">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">下一篇</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yato534.github.io/2019/09/%E5%89%91%E6%8C%87offer-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E9%93%BE%E8%A1%A8/" data-tooltip="剑指offer-字符串和链表">
              
                  <span class="hide-xs hide-sm text-small icon-mr">上一篇</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#table-of-contents">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2019 YaTo. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--disabled">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">下一篇</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://yato534.github.io/2019/09/%E5%89%91%E6%8C%87offer-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E9%93%BE%E8%A1%A8/" data-tooltip="剑指offer-字符串和链表">
              
                  <span class="hide-xs hide-sm text-small icon-mr">上一篇</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
      
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#table-of-contents">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://yato534.github.io/images/yato.jpg" alt="作者的图片" />
    
    <h4 id="about-card-name">YaTo</h4>
    
      <div id="about-card-bio">Is life always this hard? Or is it just when you&rsquo;re a kid?</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        学生
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        南京
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://yato534.github.io/images/view1.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://yato534.github.io/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


  
    <script src="https://yato534.github.io/js/clicklove.js"></script>
  

<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
  




    
  </body>
</html>

